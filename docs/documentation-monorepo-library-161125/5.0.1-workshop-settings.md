# 5.0.1 Workshop Settings & Layout

**Status:** Active  
**Last Updated:** 2025-11-15  
**Scope:** How every `/workshop/*` page plugs into the shared layout

---

## WorkshopLayout (apps/web/src/components/workshop/layout/WorkshopLayout.jsx)

- **Two-column grid** – Desktop uses `lg:grid-cols-[304px_minmax(0,1fr)]` when the sidebar is open, collapsing to `96px` when hidden. Mobile falls back to a stacked layout.
- **Auto-collapse behavior** – Navigating into sub-pages collapses the sidebar unless the user locks it; state is tracked via `isCollapsed`/`isSidebarLocked`.
- **Route awareness** – `WORKSHOP_ROUTES` drives the tree, so any new section must be added there to show up in both the sidebar and the global dropdown.
- **Theme toggle + dropdown** – On small screens the header hosts a theme toggle and a dropdown that mirrors every sidebar link for quick routing.

## Sidebar Navigation

- **Data source:** `apps/web/src/data/workshop/navigation.js`
- **Grouping:** Design System, Foundations, Components, Apparat, Hall of Mirrors, Chess, Analytics.
- **Icons:** Each entry can specify an icon token consumed by `WorkshopSidebar`.
- **Active state:** Determined via path matching (exact or prefix) to highlight the current leaf.

## Padding & Rhythm

- **Standard page padding:** `WorkshopLayout` applies `pt-10 px-4 pb-16 sm:px-8 lg:px-12` (40px top, 16→32→48px sides, 64px bottom) with `space-y-10` to every non-compact page. Most routes only need to return a `space-y-10` stack; the wrapper handles the padding.
- **Apparatus overrides:** If a demo needs edge-to-edge rendering (`WavyCircleEditor`, Pixi canvases), wrap the specific module in `h-full w-full` but keep the `DesPage` within the padded container so the headline stays aligned.

## Des Components Don't accept components theses are labels

### DesPage (`components/workshop/molecules/DesPage.jsx`)
- Section header with title, subtitle, and optional meta string. Use for every top-of-page intro.

### DesSection (`components/workshop/molecules/DesSection.jsx`)
- Reusable block with name/description/details/code slots. Wraps content in consistent spacing and typographic hierarchy. Ideal for documenting states/previews.

### DesCard (`components/workshop/molecules/DesCard.jsx`)
- Card component used inside grids to feature specimens, metrics, or control panels. Supports `name`, `description`, and optional footer metadata.

## Lazy-Loaded Heavy Routes

- Chess and Analytics routes import with `React.lazy` inside `Workshop.jsx` to avoid bundling the 27k-game dataset for general visitors.
- Follow the same pattern for any experiment that loads large JSON, shader bundles, or external APIs: wrap the route with `lazy(() => import('./workshop/MyHeavyRoute'))`.

## Checklist for New Workshop Pages

1. Add a route entry in `WORKSHOP_ROUTES` (icon optional but encouraged).
2. Create the route component under `apps/web/src/routes/workshop/`.
3. Start the page with `DesPage`, follow with `DesSection`/`DesCard` as needed.
4. Wrap content in the standard padding (`px-4 pb-16 sm:px-8 lg:px-12`) unless the demo must span full width.
5. If using large assets, lazy-load the route and clean up textures/object URLs.
6. Document the page in the relevant `5.x` file and link it from `5.0.0` so the index stays current.
