# 4.7.3 Design System: Project Detail Pages

**Version:** 1.0
**Date:** 2025-11-04
**Status:** Active
**Content Type:** implementation
**Category:** design-system

---

# Project Detail Pages

**Purpose:** Documentation of the project detail page template for showcasing individual portfolio projects with rich media and case studies.

> The project detail page provides an in-depth view of a single project, telling the complete story from challenge to solution. This template combines visual storytelling with technical documentation, allowing visitors to understand both the design thinking and implementation details behind each project.

## Overview

The project detail page follows a **narrative storytelling structure**:

```
Hook → Context → Challenge → Process → Solution → Results
```

**Page URL:** `/work/[slug]` (dynamic route)
**Template Location:** `apps/web/src/routes/work/[slug]/+page.tsx`
**Content Managed:** Yes (Sanity CMS)
**Related Projects:** Yes (automatic)

## Page Structure

```tsx
// Project detail page component structure
<BaseLayout>
  <SkipLink href="#main-content" />

  <main id="main-content" className="project-detail-page">
    {/* Hero section with key info */}
    <ProjectHero project={project} />

    {/* Table of contents for long pages */}
    <TOC sections={tocSections} />

    {/* Project story sections */}
    <ContentSection id="overview">
      <ProseBlock content={project.overview} />
    </ContentSection>

    <ContentSection id="challenge">
      <ProseBlock content={project.challenge} />
    </ContentSection>

    <ContentSection id="process">
      <ProseBlock content={project.process} />
      <MediaGallery items={project.processImages} />
    </ContentSection>

    <ContentSection id="solution">
      <ProseBlock content={project.solution} />
      <MediaGallery items={project.solutionImages} />
    </ContentSection>

    {/* Technical details */}
    <TechStack technologies={project.technologies} />

    {/* Results/Metrics */}
    <ResultsSection results={project.results} />

    {/* Related projects */}
    <RelatedProjects projects={relatedProjects} />
  </main>

  <SkipLink href="#main-content" />
</BaseLayout>
```

## Content Sections

### 1. Project Hero

**Organism:** ProjectHero (3.3.x)
**Priority:** Critical (above-the-fold)
**Content:** Project title, meta info, hero image, CTAs

#### Content Structure

```tsx
interface ProjectHeroContent {
  title: string
  client?: string
  year: string
  category: {
    name: string
    slug: string
  }
  duration: string
  team?: {
    role: string
    name: string
  }[]
  thumbnail: {
    src: string
    alt: string
    width: number
    height: number
  }
  description: string
  featured: boolean
  stats?: {
    label: string
    value: string | number
  }[]
  cta?: {
    primary?: {
      text: string
      href: string
    }
    secondary?: {
      text: string
      href: string
    }
  }
}
```

#### Hero Layouts

**Standard Layout:**
```tsx
<div className="project-hero">
  <div className="hero-content">
    <div className="hero-meta">
      <Badge variant="primary">{project.category.name}</Badge>
      <time dateTime={project.year}>{project.year}</time>
    </div>

    <h1 className="hero-title">{project.title}</h1>

    <p className="hero-description">{project.description}</p>

    <div className="hero-details">
      {project.client && (
        <div className="detail">
          <span className="label">Client</span>
          <span className="value">{project.client}</span>
        </div>
      )}
      <div className="detail">
        <span className="label">Duration</span>
        <span className="value">{project.duration}</span>
      </div>
    </div>

    {project.cta && (
      <div className="hero-ctas">
        {project.cta.primary && (
          <Button as="a" href={project.cta.primary.href} variant="primary" size="lg">
            {project.cta.primary.text}
          </Button>
        )}
        {project.cta.secondary && (
          <Button as="a" href={project.cta.secondary.href} variant="ghost" size="lg">
            {project.cta.secondary.text}
          </Button>
        )}
      </div>
    )}
  </div>

  <div className="hero-media">
    <Image
      src={project.thumbnail.src}
      alt={project.thumbnail.alt}
      width={project.thumbnail.width}
      height={project.thumbnail.height}
      priority
    />
  </div>
</div>
```

**Fullscreen Layout:**
```tsx
<div className="project-hero fullscreen">
  <div className="hero-background">
    <Image
      src={project.thumbnail.src}
      alt=""
      fill
      priority
      className="hero-bg-image"
    />
    <div className="hero-overlay" />
  </div>

  <div className="hero-content">
    <Badge variant="inverse">{project.category.name}</Badge>
    <h1 className="hero-title">{project.title}</h1>
    <p className="hero-description">{project.description}</p>
  </div>

  <ScrollIndicator href="#content" />
</div>
```

#### Meta Information Display

```tsx
<div className="project-meta-grid">
  {project.client && (
    <MetaItem
      icon={<ClientIcon />}
      label="Client"
      value={project.client}
    />
  )}

  <MetaItem
    icon={<CalendarIcon />}
    label="Year"
    value={project.year}
  />

  <MetaItem
    icon={<ClockIcon />}
    label="Duration"
    value={project.duration}
  />

  {project.team && (
    <MetaItem
      icon={<TeamIcon />}
      label="Team"
      value={`${project.team.length} member${project.team.length > 1 ? 's' : ''}`}
    />
  )}

  {project.stats && project.stats.map((stat) => (
    <MetaItem
      key={stat.label}
      icon={<StatIcon />}
      label={stat.label}
      value={stat.value}
    />
  ))}
</div>
```

### 2. Table of Contents

**Organism:** TOC (3.3.x)
**Priority:** High (for long pages)
**Content:** Jump navigation to page sections

#### TOC Structure

```tsx
interface TOCItem {
  id: string
  title: string
  level: number  // 2 for h2, 3 for h3
  children?: TOCItem[]
}

interface TOCProps {
  items: TOCItem[]
  activeId?: string
}

function TOC({ items, activeId }: TOCProps) {
  return (
    <nav className="project-toc" aria-label="Page navigation">
      <h2 className="toc-title">Contents</h2>
      <ul className="toc-list">
        {items.map((item) => (
          <li key={item.id} className={cn('toc-item', `level-${item.level}`)}>
            <a
              href={`#${item.id}`}
              className={cn('toc-link', activeId === item.id && 'active')}
              onClick={(e) => {
                e.preventDefault()
                document.getElementById(item.id)?.scrollIntoView({
                  behavior: 'smooth'
                })
              }}
            >
              {item.title}
            </a>

            {item.children && (
              <ul className="toc-sublist">
                {item.children.map((child) => (
                  <li key={child.id} className="toc-item level-3">
                    <a
                      href={`#${child.id}`}
                      className={cn('toc-link', activeId === child.id && 'active')}
                    >
                      {child.title}
                    </a>
                  </li>
                ))}
              </ul>
            )}
          </li>
        ))}
      </ul>
    </nav>
  )
}
```

#### Sticky TOC

```tsx
<div className="toc-container sticky">
  <TOC items={tocItems} activeId={activeSection} />
</div>
```

### 3. Content Sections

**Organism:** ProseBlock (3.3.x)
**Priority:** Critical
**Content:** Rich text narrative

#### Section Structure

```tsx
interface ContentSection {
  id: string
  title: string
  content: any  // Portable Text
  media?: {
    type: 'image' | 'gallery' | 'video' | 'embed'
    items?: MediaItem[]
    caption?: string
  }
  layout?: 'standard' | 'wide' | 'full' | 'split'
}

interface ContentSectionProps {
  id: string
  title: string
  children: React.ReactNode
  className?: string
}

function ContentSection({ id, title, children, className }: ContentSectionProps) {
  return (
    <section id={id} className={cn('content-section', className)}>
      <Container maxWidth={className?.includes('wide') ? 'xl' : 'lg'}>
        <header className="section-header">
          <h2 className="section-title">{title}</h2>
        </header>

        <div className="section-content">
          {children}
        </div>
      </Container>
    </section>
  )
}
```

#### Section Types

**Overview Section:**
```tsx
<ContentSection id="overview" title="Project Overview">
  <ProseBlock content={project.overview} />

  {project.overviewMedia && (
    <MediaGallery
      items={project.overviewMedia}
      layout="grid"
      caption="Project overview and key highlights"
    />
  )}
</ContentSection>
```

**Challenge Section:**
```tsx
<ContentSection id="challenge" title="The Challenge">
  <div className="challenge-highlight">
    <QuoteBlock quote={project.challenge.quote} />
  </div>

  <ProseBlock content={project.challenge.details} />

  <ChallengeList challenges={project.challenge.items} />
</ContentSection>
```

**Process Section:**
```tsx
<ContentSection id="process" title="Our Process">
  <ProcessSteps steps={project.processSteps} />

  <ProseBlock content={project.processNotes} />

  <MediaGallery
    items={project.processImages}
    layout="masonry"
    caption="Process documentation and iterations"
  />
</ContentSection>
```

**Solution Section:**
```tsx
<ContentSection id="solution" title="The Solution">
  <SolutionOverview
    overview={project.solution.overview}
    features={project.solution.features}
  />

  <BeforeAfter
    before={project.solution.before}
    after={project.solution.after}
  />

  <MediaGallery
    items={project.solutionImages}
    layout="carousel"
    caption="Final implementation and results"
  />
</ContentSection>
```

### 4. Media Gallery

**Organism:** MediaGallery (3.3.x)
**Priority:** High
**Content:** Images, videos, interactive embeds

#### Gallery Types

**Grid Gallery:**
```tsx
<MediaGallery
  items={project.images}
  layout="grid"
  columns={3}
  aspectRatio="16:10"
/>
```

**Masonry Gallery:**
```tsx
<MediaGallery
  items={project.images}
  layout="masonry"
  gutter={16}
/>
```

**Carousel Gallery:**
```tsx
<MediaGallery
  items={project.images}
  layout="carousel"
  showThumbnails
  autoPlay={false}
/>
```

#### Media Item Types

**Image:**
```tsx
interface ImageItem {
  type: 'image'
  src: string
  alt: string
  width: number
  height: number
  caption?: string
  credit?: string
}
```

**Video:**
```tsx
interface VideoItem {
  type: 'video'
  src: string
  poster?: string
  caption?: string
  autoplay?: boolean
  muted?: boolean
}
```

**Embed:**
```tsx
interface EmbedItem {
  type: 'embed'
  url: string
  title: string
  caption?: string
  height?: number
}
```

### 5. Tech Stack

**Organism:** TechStack (3.3.x)
**Priority:** Medium
**Content:** Technologies used in project

#### Tech Stack Display

```tsx
interface Technology {
  name: string
  category: 'frontend' | 'backend' | 'database' | 'tool' | 'platform'
  logo?: string
  description?: string
  version?: string
}

interface TechStackProps {
  title?: string
  technologies: Technology[]
  layout: 'grid' | 'list' | 'categorized'
}

function TechStack({ title = 'Technologies Used', technologies, layout }: TechStackProps) {
  return (
    <section className="tech-stack">
      <Container maxWidth="lg">
        <h2 className="section-title">{title}</h2>

        {layout === 'categorized' && (
          <div className="tech-categories">
            {Object.entries(groupBy(technologies, 'category')).map(([category, items]) => (
              <div key={category} className="tech-category">
                <h3 className="category-title">{formatCategory(category)}</h3>
                <div className="tech-grid">
                  {items.map((tech) => (
                    <TechItem key={tech.name} technology={tech} />
                  ))}
                </div>
              </div>
            ))}
          </div>
        )}

        {layout === 'grid' && (
          <div className="tech-grid">
            {technologies.map((tech) => (
              <TechItem key={tech.name} technology={tech} />
            ))}
          </div>
        )}
      </Container>
    </section>
  )
}

function TechItem({ technology }: { technology: Technology }) {
  return (
    <div className="tech-item">
      {technology.logo && (
        <img src={technology.logo} alt={technology.name} className="tech-logo" />
      )}
      <div className="tech-info">
        <h4 className="tech-name">{technology.name}</h4>
        {technology.version && (
          <span className="tech-version">{technology.version}</span>
        )}
        {technology.description && (
          <p className="tech-description">{technology.description}</p>
        )}
      </div>
    </div>
  )
}
```

### 6. Results Section

**Organism:** ResultsSection (3.3.x)
**Priority:** High
**Content:** Project outcomes and metrics

#### Results Display

```tsx
interface Result {
  type: 'metric' | 'testimonial' | 'award' | 'quote'
  value?: string | number
  label: string
  description?: string
  icon?: React.ComponentType
  source?: string  // For testimonials
}

function ResultsSection({ results }: { results: Result[] }) {
  const metrics = results.filter(r => r.type === 'metric')
  const testimonials = results.filter(r => r.type === 'testimonial')
  const awards = results.filter(r => r.type === 'award')

  return (
    <section className="results-section">
      <Container maxWidth="lg">
        <h2 className="section-title">Results & Impact</h2>

        {metrics.length > 0 && (
          <>
            <h3 className="subsection-title">Key Metrics</h3>
            <div className="metrics-grid">
              {metrics.map((metric, index) => (
                <MetricCard key={index} result={metric} />
              ))}
            </div>
          </>
        )}

        {testimonials.length > 0 && (
          <>
            <h3 className="subsection-title">Client Feedback</h3>
            <TestimonialCarousel testimonials={testimonials} />
          </>
        )}

        {awards.length > 0 && (
          <>
            <h3 className="subsection-title">Recognition</h3>
            <AwardList awards={awards} />
          </>
        )}
      </Container>
    </section>
  )
}
```

#### Metric Card

```tsx
function MetricCard({ result }: { result: Result }) {
  const Icon = result.icon

  return (
    <div className="metric-card">
      {Icon && <Icon className="metric-icon" />}
      <div className="metric-value">{result.value}</div>
      <div className="metric-label">{result.label}</div>
      {result.description && (
        <p className="metric-description">{result.description}</p>
      )}
    </div>
  )
}
```

### 7. Related Projects

**Organism:** RelatedProjects (3.3.x)
**Priority:** Medium
**Content:** Suggest other projects

#### Related Projects Logic

```tsx
// Determine related projects based on:
// 1. Shared category (primary factor)
// 2. Shared technologies (secondary factor)
// 3. Sequential projects (tertiary factor)

function getRelatedProjects(currentProject: Project, allProjects: Project[]): Project[] {
  return allProjects
    .filter(p => p.id !== currentProject.id)
    .map(project => {
      let score = 0

      // Same category
      if (project.category.slug === currentProject.category.slug) {
        score += 3
      }

      // Shared technologies
      const sharedTechs = project.technologies.filter(tech =>
        currentProject.technologies.some(t => t.name === tech.name)
      )
      score += sharedTechs.length

      // Adjacent in time
      const timeDiff = Math.abs(
        new Date(project.year).getTime() - new Date(currentProject.year).getTime()
      )
      if (timeDiff < 365 * 24 * 60 * 60 * 1000) { // Within 1 year
        score += 1
      }

      return { project, score }
    })
    .sort((a, b) => b.score - a.score)
    .slice(0, 3)
    .map(item => item.project)
}
```

#### Related Projects Display

```tsx
function RelatedProjects({ projects }: { projects: Project[] }) {
  return (
    <section className="related-projects">
      <Container maxWidth="lg">
        <h2 className="section-title">More Projects</h2>

        <div className="projects-grid">
          {projects.map((project) => (
            <ProjectCard
              key={project.id}
              project={project}
              layout="horizontal"
            />
          ))}
        </div>

        <div className="view-all">
          <Button as="a" href="/work" variant="ghost">
            View All Projects →
          </Button>
        </div>
      </Container>
    </section>
  )
}
```

## Content Management

### Sanity Schema

```tsx
// sanity/schemas/projectDetail.ts
export default {
  name: 'projectDetail',
  title: 'Project Detail',
  type: 'document',
  fields: [
    // ... basic project fields (title, slug, etc.)

    // Hero
    {
      name: 'hero',
      title: 'Hero Section',
      type: 'object',
      fields: [
        {
          name: 'description',
          title: 'Short Description',
          type: 'text',
          rows: 3,
          validation: Rule => Rule.required()
        },
        {
          name: 'duration',
          title: 'Project Duration',
          type: 'string',
          validation: Rule => Rule.required()
        },
        {
          name: 'client',
          title: 'Client Name',
          type: 'string'
        },
        {
          name: 'team',
          title: 'Team Members',
          type: 'array',
          of: [{
            type: 'object',
            fields: [
              { name: 'role', type: 'string' },
              { name: 'name', type: 'string' }
            ]
          }]
        },
        {
          name: 'cta',
          title: 'Call to Action',
          type: 'object',
          fields: [
            {
              name: 'primary',
              title: 'Primary CTA',
              type: 'object',
              fields: [
                { name: 'text', type: 'string' },
                { name: 'href', type: 'url' }
              ]
            },
            {
              name: 'secondary',
              title: 'Secondary CTA',
              type: 'object',
              fields: [
                { name: 'text', type: 'string' },
                { name: 'href', type: 'url' }
              ]
            }
          ]
        }
      ]
    },

    // Content Sections
    {
      name: 'overview',
      title: 'Project Overview',
      type: 'array',
      of: [{ type: 'block' }],
      validation: Rule => Rule.required()
    },

    {
      name: 'challenge',
      title: 'Challenge',
      type: 'object',
      fields: [
        {
          name: 'quote',
          title: 'Opening Quote',
          type: 'text'
        },
        {
          name: 'details',
          title: 'Challenge Details',
          type: 'array',
          of: [{ type: 'block' }]
        }
      ]
    },

    {
      name: 'process',
      title: 'Process',
      type: 'array',
      of: [{ type: 'block' }],
      validation: Rule => Rule.required()
    },

    {
      name: 'solution',
      title: 'Solution',
      type: 'array',
      of: [{ type: 'block' }],
      validation: Rule => Rule.required()
    },

    // Media
    {
      name: 'media',
      title: 'Media Gallery',
      type: 'array',
      of: [{
        type: 'object',
        name: 'mediaItem',
        fields: [
          {
            name: 'type',
            title: 'Type',
            type: 'string',
            options: ['image', 'video', 'embed'],
            validation: Rule => Rule.required()
          },
          {
            name: 'image',
            title: 'Image',
            type: 'image',
            options: { hotspot: true },
            hidden: ({ parent }) => parent?.type !== 'image'
          },
          {
            name: 'video',
            title: 'Video URL',
            type: 'url',
            hidden: ({ parent }) => parent?.type !== 'video'
          },
          {
            name: 'embed',
            title: 'Embed URL',
            type: 'url',
            hidden: ({ parent }) => parent?.type !== 'embed'
          },
          {
            name: 'caption',
            title: 'Caption',
            type: 'string'
          },
          {
            name: 'credit',
            title: 'Credit',
            type: 'string'
          }
        ],
        preview: {
          select: {
            title: 'caption',
            type: 'type',
            media: 'image'
          }
        }
      }]
    },

    // Technologies
    {
      name: 'technologies',
      title: 'Technologies',
      type: 'array',
      of: [{
        type: 'object',
        fields: [
          {
            name: 'name',
            title: 'Technology Name',
            type: 'string',
            validation: Rule => Rule.required()
          },
          {
            name: 'category',
            title: 'Category',
            type: 'string',
            options: ['frontend', 'backend', 'database', 'tool', 'platform'],
            validation: Rule => Rule.required()
          },
          {
            name: 'version',
            title: 'Version',
            type: 'string'
          }
        ]
      }]
    },

    // Results
    {
      name: 'results',
      title: 'Results & Impact',
      type: 'array',
      of: [{
        type: 'object',
        name: 'result',
        fields: [
          {
            name: 'type',
            title: 'Type',
            type: 'string',
            options: ['metric', 'testimonial', 'award', 'quote'],
            validation: Rule => Rule.required()
          },
          {
            name: 'value',
            title: 'Value',
            type: 'string',
            hidden: ({ parent }) => parent?.type === 'testimonial' || parent?.type === 'quote'
          },
          {
            name: 'label',
            title: 'Label',
            type: 'string',
            validation: Rule => Rule.required()
          },
          {
            name: 'description',
            title: 'Description',
            type: 'text'
          },
          {
            name: 'source',
            title: 'Source',
            type: 'string',
            hidden: ({ parent }) => parent?.type !== 'testimonial'
          }
        ]
      }]
    }
  ]
}
```

### GROQ Query

```tsx
// queries/projectDetail.ts
const PROJECT_QUERY = `
*[_type == "project" && slug.current == $slug][0]{
  _id,
  title,
  "slug": slug.current,
  year,
  category->{
    name,
    "slug": slug.current
  },
  thumbnail{
    "src": asset->url,
    "alt": alt,
    "width": asset->metadata.dimensions.width,
    "height": asset->metadata.dimensions.height
  },
  hero{
    description,
    duration,
    client,
    team[]{
      role,
      name
    },
    cta{
      primary{
        text,
        href
      },
      secondary{
        text,
        href
      }
    }
  },
  overview,
  challenge{
    quote,
    details
  },
  process,
  solution,
  media[]{
    type,
    "image": image.asset->url,
    video,
    embed,
    caption,
    credit
  },
  technologies[]{
    name,
    category,
    version
  },
  results[]{
    type,
    value,
    label,
    description,
    source
  }
}`

const RELATED_PROJECTS_QUERY = `
*[_type == "project" && slug.current != $slug] | order(year desc) {
  _id,
  title,
  "slug": slug.current,
  category->{
    name,
    "slug": slug.current
  },
  thumbnail{
    "src": asset->url,
    "alt": alt
  },
  year,
  technologies[]{name}
}
`
```

## Implementation

### Page Component

```tsx
// apps/web/src/routes/work/[slug]/+page.tsx
import { notFound } from 'next/navigation'
import { client } from '@/lib/sanity'

const PROJECT_QUERY = `*[_type == "project" && slug.current == $slug][0]{...}`
const RELATED_PROJECTS_QUERY = `*[_type == "project" && slug.current != $slug]{...}`

interface Props {
  params: {
    slug: string
  }
}

export default async function ProjectDetailPage({ params }: Props) {
  const project = await client.fetch(PROJECT_QUERY, { slug: params.slug })

  if (!project) {
    notFound()
  }

  const allProjects = await client.fetch(RELATED_PROJECTS_QUERY, { slug: params.slug })
  const relatedProjects = getRelatedProjects(project, allProjects)

  // Generate TOC from content
  const tocSections = generateTOC([project.overview, project.challenge, project.process, project.solution])

  return (
    <BaseLayout>
      <main id="main-content" className="project-detail-page">
        {/* Hero */}
        <ProjectHero project={project} />

        {/* Table of Contents */}
        {tocSections.length > 3 && (
          <TOC sections={tocSections} />
        )}

        {/* Content Sections */}
        <article id="content" className="project-content">
          <ContentSection id="overview" title="Project Overview">
            <ProseBlock content={project.overview} />
            {project.media?.filter(m => m.section === 'overview') && (
              <MediaGallery items={project.media.filter(m => m.section === 'overview')} />
            )}
          </ContentSection>

          <ContentSection id="challenge" title="The Challenge">
            {project.challenge?.quote && (
              <QuoteBlock quote={project.challenge.quote} />
            )}
            <ProseBlock content={project.challenge?.details} />
          </ContentSection>

          <ContentSection id="process" title="Our Process">
            <ProseBlock content={project.process} />
            {project.media?.filter(m => m.section === 'process') && (
              <MediaGallery items={project.media.filter(m => m.section === 'process')} />
            )}
          </ContentSection>

          <ContentSection id="solution" title="The Solution">
            <ProseBlock content={project.solution} />
            {project.media?.filter(m => m.section === 'solution') && (
              <MediaGallery items={project.media.filter(m => m.section === 'solution')} />
            )}
          </ContentSection>

          {/* Tech Stack */}
          <TechStack technologies={project.technologies} layout="categorized" />

          {/* Results */}
          <ResultsSection results={project.results} />
        </article>

        {/* Related Projects */}
        <RelatedProjects projects={relatedProjects} />
      </main>
    </BaseLayout>
  )
}

function generateTOC(content: any[]): TOCItem[] {
  // Extract headings from Portable Text
  const sections: TOCItem[] = []

  content.forEach(block => {
    if (block._type === 'block' && block.style) {
      const level = parseInt(block.style.replace('h', ''))
      if (level >= 2 && level <= 4) {
        sections.push({
          id: generateId(block.children[0]?.text),
          title: block.children[0]?.text,
          level
        })
      }
    }
  })

  return sections
}
```

### Styling

```scss
// apps/web/src/routes/work/[slug]/+page.scss
.project-detail-page {
  .project-hero {
    padding: var(--kol-spacing-4xl) 0;
    background: var(--kol-surface-primary);

    .hero-content {
      max-width: 60ch;

      .hero-meta {
        display: flex;
        gap: var(--kol-spacing-md);
        align-items: center;
        margin-bottom: var(--kol-spacing-lg);

        .badge {
          text-transform: uppercase;
          font-size: var(--kol-font-size-xs);
          letter-spacing: 0.05em;
        }

        time {
          font-size: var(--kol-font-size-sm);
          color: var(--kol-surface-on-primary, 0.7);
        }
      }

      .hero-title {
        font-size: clamp(
          var(--kol-font-size-4xl),
          5vw,
          var(--kol-font-size-6xl)
        );
        font-weight: var(--kol-font-weight-bold);
        line-height: var(--kol-line-height-tight);
        margin-bottom: var(--kol-spacing-lg);
      }

      .hero-description {
        font-size: var(--kol-font-size-xl);
        line-height: var(--kol-line-height-relaxed);
        color: var(--kol-surface-on-primary, 0.8);
        margin-bottom: var(--kol-spacing-2xl);
      }

      .hero-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--kol-spacing-lg);
        margin-bottom: var(--kol-spacing-2xl);

        .detail {
          .label {
            display: block;
            font-size: var(--kol-font-size-xs);
            color: var(--kol-surface-on-primary, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--kol-spacing-xs);
          }

          .value {
            display: block;
            font-size: var(--kol-font-size-lg);
            font-weight: var(--kol-font-weight-semibold);
          }
        }
      }

      .hero-ctas {
        display: flex;
        gap: var(--kol-spacing-md);

        @media (max-width: 768px) {
          flex-direction: column;
          width: 100%;

          button {
            width: 100%;
          }
        }
      }
    }

    .hero-media {
      margin-top: var(--kol-spacing-4xl);

      img {
        width: 100%;
        height: auto;
        border-radius: var(--kol-border-radius-lg);
        box-shadow: var(--kol-shadow-xl);
      }
    }
  }

  .project-toc {
    position: sticky;
    top: var(--kol-spacing-4xl);
    max-width: 200px;
    padding: var(--kol-spacing-lg);
    background: var(--kol-container-primary);
    border-radius: var(--kol-border-radius-lg);

    .toc-title {
      font-size: var(--kol-font-size-sm);
      font-weight: var(--kol-font-weight-semibold);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--kol-spacing-md);
    }

    .toc-list {
      list-style: none;
      padding: 0;
      margin: 0;

      .toc-item {
        margin-bottom: var(--kol-spacing-xs);

        &.level-2 {
          .toc-link {
            font-weight: var(--kol-font-weight-medium);
          }
        }

        &.level-3 {
          padding-left: var(--kol-spacing-md);

          .toc-link {
            font-size: var(--kol-font-size-sm);
          }
        }

        .toc-link {
          display: block;
          padding: var(--kol-spacing-xs) 0;
          color: var(--kol-surface-on-primary, 0.8);
          text-decoration: none;
          border-left: 2px solid transparent;
          padding-left: var(--kol-spacing-sm);
          transition: all var(--kol-transition-fast);

          &:hover {
            color: var(--kol-surface-on-primary);
            border-left-color: var(--kol-accent-primary);
          }

          &.active {
            color: var(--kol-accent-primary);
            border-left-color: var(--kol-accent-primary);
            font-weight: var(--kol-font-weight-medium);
          }
        }
      }
    }
  }

  .content-section {
    padding: var(--kol-spacing-4xl) 0;

    &:nth-child(even) {
      background: var(--kol-surface-secondary);
    }

    .section-header {
      max-width: 60ch;
      margin-bottom: var(--kol-spacing-2xl);

      .section-title {
        font-size: var(--kol-font-size-3xl);
        font-weight: var(--kol-font-weight-bold);
        margin-bottom: var(--kol-spacing-lg);
      }
    }

    .section-content {
      max-width: 65ch;

      .prose-block {
        font-size: var(--kol-font-size-lg);
        line-height: var(--kol-line-height-relaxed);

        h2, h3, h4 {
          margin-top: var(--kol-spacing-2xl);
          margin-bottom: var(--kol-spacing-md);
        }

        p {
          margin-bottom: var(--kol-spacing-lg);
        }

        ul, ol {
          margin-bottom: var(--kol-spacing-lg);
          padding-left: var(--kol-spacing-xl);

          li {
            margin-bottom: var(--kol-spacing-sm);
          }
        }
      }
    }
  }

  .tech-stack {
    padding: var(--kol-spacing-4xl) 0;
    background: var(--kol-surface-tertiary);

    .tech-categories {
      display: grid;
      gap: var(--kol-spacing-2xl);

      .tech-category {
        .category-title {
          font-size: var(--kol-font-size-xl);
          font-weight: var(--kol-font-weight-semibold);
          margin-bottom: var(--kol-spacing-lg);
        }

        .tech-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
          gap: var(--kol-spacing-lg);

          .tech-item {
            display: flex;
            gap: var(--kol-spacing-md);
            padding: var(--kol-spacing-lg);
            background: var(--kol-container-primary);
            border-radius: var(--kol-border-radius-md);

            .tech-logo {
              width: 40px;
              height: 40px;
              object-fit: contain;
            }

            .tech-info {
              .tech-name {
                font-weight: var(--kol-font-weight-medium);
                margin-bottom: var(--kol-spacing-xs);
              }

              .tech-version {
                font-size: var(--kol-font-size-sm);
                color: var(--kol-surface-on-primary, 0.7);
              }
            }
          }
        }
      }
    }
  }

  .results-section {
    padding: var(--kol-spacing-4xl) 0;

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--kol-spacing-lg);
      margin-bottom: var(--kol-spacing-2xl);

      .metric-card {
        text-align: center;
        padding: var(--kol-spacing-2xl);
        background: var(--kol-container-primary);
        border-radius: var(--kol-border-radius-lg);

        .metric-icon {
          width: 48px;
          height: 48px;
          margin: 0 auto var(--kol-spacing-md);
          color: var(--kol-accent-primary);
        }

        .metric-value {
          font-size: var(--kol-font-size-4xl);
          font-weight: var(--kol-font-weight-bold);
          color: var(--kol-accent-primary);
          margin-bottom: var(--kol-spacing-sm);
        }

        .metric-label {
          font-size: var(--kol-font-size-lg);
          font-weight: var(--kol-font-weight-medium);
          margin-bottom: var(--kol-spacing-sm);
        }

        .metric-description {
          font-size: var(--kol-font-size-sm);
          color: var(--kol-surface-on-primary, 0.8);
        }
      }
    }
  }

  .related-projects {
    padding: var(--kol-spacing-4xl) 0;
    background: var(--kol-surface-secondary);

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: var(--kol-spacing-xl);
      margin-bottom: var(--kol-spacing-2xl);
    }

    .view-all {
      text-align: center;
    }
  }
}
```

## Performance Optimization

### Image Loading

```tsx
// Prioritize hero image, lazy load others
<Image
  src={project.thumbnail.src}
  alt={project.thumbnail.alt}
  width={project.thumbnail.width}
  height={project.thumbnail.height}
  priority  // Above-the-fold
/>

{project.galleryImages.map((image, index) => (
  <Image
    key={index}
    src={image.src}
    alt={image.alt}
    loading={index < 6 ? 'eager' : 'lazy'}
    placeholder="blur"
  />
))}
```

### Code Splitting

```tsx
// Lazy load heavy components
const MediaGallery = lazy(() => import('./MediaGallery'))
const ResultsSection = lazy(() => import('./ResultsSection'))

function ProjectDetailPage() {
  return (
    <>
      <ProjectHero />
      <Suspense fallback={<TOCSkeleton />}>
        <TOC />
      </Suspense>
      {/* Content sections */}
      <Suspense fallback={<GallerySkeleton />}>
        <MediaGallery />
      </Suspense>
      <Suspense fallback={<ResultsSkeleton />}>
        <ResultsSection />
      </Suspense>
    </>
  )
}
```

## SEO Optimization

### Structured Data

```tsx
// JSON-LD for project
const projectSchema = {
  '@context': 'https://schema.org',
  '@type': 'CreativeWork',
  name: project.title,
  description: project.description,
  dateCreated: project.year,
  author: {
    '@type': 'Organization',
    name: 'Kolkrabbi'
  },
  image: project.thumbnail.src,
  url: `https://example.com/work/${project.slug}`,
  isBasedOn: project.technologies.map(t => t.name),
  genre: project.category.name
}
```

### Meta Tags

```tsx
export async function generateMetadata({ params }: Props) {
  const project = await client.fetch(PROJECT_QUERY, { slug: params.slug })

  return {
    title: `${project.title} | Our Work | Kolkrabbi`,
    description: project.description,
    openGraph: {
      title: project.title,
      description: project.description,
      images: [project.thumbnail.src],
      type: 'article',
      article: {
        publishedTime: project.year,
        authors: ['Kolkrabbi']
      }
    }
  }
}
```

## Accessibility

### ARIA Labels

```tsx
<main role="main" aria-label={`${project.title} case study`}>
  <article aria-labelledby="project-title">
    <header>
      <h1 id="project-title">{project.title}</h1>
    </header>

    <nav aria-label="Table of contents">
      <TOC sections={tocSections} />
    </nav>

    <section aria-label="Project overview">
      {/* Content */}
    </section>
  </article>
</main>
```

### Skip Links

```tsx
<SkipLink href="#content">
  Skip to project content
</SkipLink>
```

## Analytics

### Track Engagement

```tsx
// Track section views
function trackSectionView(sectionId: string) {
  gtag('event', 'section_view', {
    event_category: 'engagement',
    event_label: sectionId
  })
}

// Track media interactions
function trackMediaInteraction(mediaType: string, action: string) {
  gtag('event', 'media_interaction', {
    event_category: 'engagement',
    event_label: `${mediaType}_${action}`
  })
}

// Track related project clicks
function trackRelatedProjectClick(projectSlug: string) {
  gtag('event', 'related_project_click', {
    event_category: 'engagement',
    event_label: projectSlug
  })
}
```

## Best Practices

### Do's

✅ Use clear, scannable sections
✅ Include relevant visuals for each section
✅ Provide context before showing solutions
✅ Use consistent heading hierarchy
✅ Implement proper TOC for long pages
✅ Include meaningful metrics/results
✅ Link related projects
✅ Optimize all media
✅ Test on mobile devices
✅ Validate structured data

### Don'ts

❌ Use too many words per section
❌ Skip the problem/challenge section
❌ Show before/after without context
❌ Forget to credit media sources
❌ Use low-quality placeholder images
❌ Make TOC too long (> 8 items)
❌ Ignore mobile navigation
❌ Skip meta descriptions
❌ Forget alt text for images
❌ Mix different content types randomly

## Related Documentation

**Design System:**
- [4.7.0 Design System: Pages](4.7.0-design-system-pages.md) - Page architecture overview
- [4.7.1 Design System: Home Page](4.7.1-design-system-home-template.md) - Home page template
- [4.2.0 Design System: Work Pages](4.2.0-design-system-work-pages.md) - Work listing page
- [3.3.0 Design System: Organisms](3.3.0-design-system-organisms.md) - Project detail organisms

**Content:**
- [5.0.0 Design System: Content Strategy](5.0.0-design-system-content-strategy.md) - CMS integration
- [5.1.0 Design System: Sanity CMS](5.1.0-design-system-sanity-cms.md) - Schema patterns

**Research:**
- [6.2.0 Research: Typography](6.2.0-research-typography.md) - Typography in long-form content
- [6.1.0 Research: Data Tables](6.1.0-research-data-tables.md) - Data display in results sections

---

**File Locations:**
- **Template:** `apps/web/src/routes/work/[slug]/+page.tsx`
- **Styles:** `apps/web/src/routes/work/[slug]/+page.scss`
- **Sanity Schemas:** `sanity/schemas/projectDetail.ts`
- **Queries:** `sanity/queries/projectDetail.ts`

---

**Last Updated:** 2025-11-04
**Cross-References:** 4.0.0, 4.1.0, 4.2.0, 3.3.0, 5.0.0, 5.1.0, 6.2.0, 6.1.0
**Category:** Design System
**Status:** Active
