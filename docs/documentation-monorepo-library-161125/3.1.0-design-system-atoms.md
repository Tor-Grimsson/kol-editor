# 3.1.0 Design System: Atoms

**Version:** 1.0
**Date:** 2025-11-04
**Status:** Active
**Content Type:** implementation
**Category:** design-system

---

# Atoms: Basic Building Blocks

**Purpose:** Documentation of fundamental, indivisible UI elements in the kolkrabbi design system.

> Atoms are the basic building blocks of the kolkrabbi design system. They are the smallest functional units that cannot be broken down further without losing their meaning. Atoms directly map to HTML primitives enhanced with design tokens, following accessibility best practices and WCAG 2.1 AA standards.

## Design Philosophy

1. **Single Purpose** - Each atom serves one clear, specific function
2. **Token-Driven** - All styling uses semantic design tokens (`--kol-*`)
3. **Accessibility First** - Every atom meets WCAG 2.1 AA standards
4. **Composable** - Atoms combine seamlessly into molecules
5. **Semantic HTML** - Each atom uses appropriate HTML elements with ARIA attributes
6. **Type Safe** - TypeScript definitions ensure clear component contracts

## Atom Categories

### Interactive Atoms

#### Button

**Location:** `packages/ui/src/atoms/Button/`

The primary interactive element for user actions. Supports multiple variants and sizes.

**Variants:**
- `primary` - Primary action (accent color)
- `secondary` - Secondary action (surface color with border)
- `ghost` - Subtle action (text-only with hover state)
- `danger` - Destructive action (danger color)

**Sizes:**
- `sm` - Small (32px height)
- `md` - Medium (40px height)
- `lg` - Large (48px height)

**Props:**
```tsx
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger'
  size?: 'sm' | 'md' | 'lg'
  isLoading?: boolean
  icon?: React.ReactNode
  iconPosition?: 'left' | 'right'
  children: React.ReactNode
}
```

**Usage:**
```tsx
// Primary button
<Button variant="primary" size="md">
  Click me
</Button>

// Button with icon
<Button variant="secondary" icon={<PlusIcon />}>
  Add item
</Button>

// Loading state
<Button variant="primary" isLoading>
  Saving...
</Button>
```

**States:**
- Default
- Hover
- Active
- Focus (keyboard)
- Disabled
- Loading

**Accessibility:**
- `role="button"` (implicit)
- `aria-disabled` when disabled
- `aria-busy` when loading
- Keyboard: Enter/Space to activate
- Focus visible with proper contrast

#### Switch

**Location:** `packages/ui/src/atoms/Switch/`

A toggle control for on/off states, replacing legacy checkbox for binary choices.

**Props:**
```tsx
interface SwitchProps {
  checked?: boolean
  defaultChecked?: boolean
  onCheckedChange?: (checked: boolean) => void
  disabled?: boolean
  size?: 'sm' | 'md'
  label?: string
  description?: string
}
```

**Usage:**
```tsx
<Switch
  checked={isEnabled}
  onCheckedChange={setIsEnabled}
  label="Enable notifications"
  description="Receive updates about your account"
/>
```

**Accessibility:**
- `role="switch"`
- `aria-checked` reflects state
- `aria-disabled` when disabled
- Keyboard: Space to toggle
- Associated label with `aria-describedby`

#### Checkbox

**Location:** `packages/ui/src/atoms/Checkbox/`

A binary selection input for multiple-choice scenarios.

**Props:**
```tsx
interface CheckboxProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string
  description?: string
  indeterminate?: boolean
}
```

**Usage:**
```tsx
<Checkbox
  checked={isChecked}
  onCheckedChange={setIsChecked}
  label="I agree to the terms"
  description="By checking this box, you agree to our terms of service"
/>
```

**Accessibility:**
- `role="checkbox"`
- `aria-checked` reflects state
- `aria-indeterminate` for partial selection
- Keyboard: Space to toggle
- Proper label association

#### RadioGroup

**Location:** `packages/ui/src/atoms/RadioGroup/`

Single-selection from multiple options.

**Props:**
```tsx
interface RadioGroupProps {
  value?: string
  defaultValue?: string
  onValueChange?: (value: string) => void
  disabled?: boolean
  orientation?: 'horizontal' | 'vertical'
  name?: string
  children: React.ReactNode
}

interface RadioGroupItemProps {
  value: string
  disabled?: boolean
  children: React.ReactNode
}
```

**Usage:**
```tsx
<RadioGroup
  value={selectedOption}
  onValueChange={setSelectedOption}
  orientation="vertical"
>
  <RadioGroupItem value="option-1">Option 1</RadioGroupItem>
  <RadioGroupItem value="option-2">Option 2</RadioGroupItem>
  <RadioGroupItem value="option-3">Option 3</RadioGroupItem>
</RadioGroup>
```

**Accessibility:**
- `role="radiogroup"`
- `role="radio"` on items
- `aria-checked` on selected item
- Keyboard: Arrow keys to navigate
- Tab stops on group, arrow keys within

### Input Atoms

#### Input

**Location:** `packages/ui/src/atoms/Input/`

Text and data entry field with label support.

**Props:**
```tsx
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string
  description?: string
  error?: string
  isInvalid?: boolean
  startIcon?: React.ReactNode
  endIcon?: React.ReactNode
}
```

**Usage:**
```tsx
<Input
  label="Email address"
  type="email"
  placeholder="you@example.com"
  description="We'll never share your email"
  isInvalid={!!error}
  error={error}
  startIcon={<MailIcon />}
/>
```

**Accessibility:**
- Proper label association with `for` and `id`
- `aria-describedby` links to description/error
- `aria-invalid` when error present
- `aria-required` when required

**Variants:**
- Text
- Email
- Password
- Number
- URL
- Search

**Sizing & Styling**
- Responsive size map shared with Dropdown: `sm` (auto when viewport < 768px), `md` (≥ 768px), `lg` (≥ 1024px) unless `size` prop overrides.
- Font sizes: 11 px / 12 px / 14 px mono with 120% line-height.
- Vertical padding: 12 px / 14 px / 16 px with fixed 24 px horizontal padding.
- Left icons inherit breakpoint-driven sizes (12 px / 14 px / 16 px) and automatically add `padding-left = paddingX + icon + 12`.
- Background uses `surface-primary` by default and shifts to `surface-secondary` on focus while keeping the neutral border (no accent highlight).

#### Textarea

**Location:** `packages/ui/src/atoms/Textarea/`

Multi-line text input with resize controls.

**Props:**
```tsx
interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string
  description?: string
  error?: string
  isInvalid?: boolean
  resize?: 'none' | 'both' | 'horizontal' | 'vertical'
}
```

**Usage:**
```tsx
<Textarea
  label="Message"
  placeholder="Enter your message..."
  rows={4}
  resize="vertical"
/>
```

**Accessibility:**
- Proper label association
- `aria-describedby` for help text
- `aria-invalid` when error present

#### Select

**Location:** `packages/ui/src/atoms/Select/`

Dropdown selection interface with search support.

**Props:**
```tsx
interface SelectProps {
  value?: string
  defaultValue?: string
  onValueChange?: (value: string) => void
  disabled?: boolean
  label?: string
  description?: string
  placeholder?: string
  children: React.ReactNode
}

interface SelectItemProps {
  value: string
  disabled?: boolean
  children: React.ReactNode
}
```

**Usage:**
```tsx
<Select
  value={selectedValue}
  onValueChange={setSelectedValue}
  label="Choose a fruit"
  placeholder="Select an option"
>
  <SelectItem value="apple">Apple</SelectItem>
  <SelectItem value="banana">Banana</SelectItem>
  <SelectItem value="orange">Orange</SelectItem>
</Select>
```

**Accessibility:**
- `role="combobox"`
- `aria-expanded` reflects state
- `aria-controls` links to listbox
- `aria-activedescendant` indicates active option
- Keyboard: Arrow keys to navigate, Enter/Space to select

**Sizing & Styling**
- Auto-selects `sm`, `md`, or `lg` metrics based on viewport breakpoints unless a `size` prop is supplied.
- Font + padding mirror Input specs (11/12/14 px mono, 12/14/16 px vertical, fixed 24 px horizontal).
- Trigger and dropdown list share the same rounded wrapper; list background inherits from the wrapper (surface-primary) with subtle border only.
- Active option uses an absolute 4 px dot positioned 12 px from the left with 16 px text offset.
- Option rows have fixed `8px` vertical padding to keep dense stacks aligned across sizes.

#### Label

**Location:** `packages/ui/src/atoms/Label/`

Field identification and descriptions.

**Props:**
```tsx
interface LabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {
  required?: boolean
  children: React.ReactNode
}
```

**Usage:**
```tsx
<Label htmlFor="email-input" required>
  Email address
</Label>
<Input id="email-input" />
```

**Accessibility:**
- Proper `for` attribute linking to input
- `aria-required` when required
- Visual indicator for required fields

### Data Display Atoms

#### Badge

**Location:** `packages/ui/src/atoms/Badge/`

Status indicators and labels with semantic color support.

**Variants:**
- `default` - Neutral status
- `success` - Positive status
- `warning` - Caution status
- `danger` - Error status
- `info` - Informational

**Sizes:**
- `sm` - Small badge
- `md` - Medium badge

**Props:**
```tsx
interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement> {
  variant?: 'default' | 'success' | 'warning' | 'danger' | 'info'
  size?: 'sm' | 'md'
  children: React.ReactNode
}
```

**Usage:**
```tsx
<Badge variant="success" size="sm">
  Active
</Badge>

<Badge variant="danger">
  Error
</Badge>
```

**Accessibility:**
- Semantic color conveys meaning
- Text label for screen readers
- `aria-label` for icon-only badges

#### Avatar

**Location:** `packages/ui/src/atoms/Avatar/`

User profile representations with fallbacks.

**Props:**
```tsx
interface AvatarProps extends React.HTMLAttributes<HTMLDivElement> {
  src?: string
  alt?: string
  name?: string
  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl'
  fallback?: React.ReactNode
}
```

**Usage:**
```tsx
<Avatar
  src="/avatars/user-1.jpg"
  alt="John Doe"
  name="John Doe"
  size="md"
/>

// Fallback to initials
<Avatar name="Jane Smith" size="lg" />

// Custom fallback
<Avatar size="sm">
  <UserIcon />
</Avatar>
```

**Accessibility:**
- `alt` attribute for images
- Fallback displays when image fails
- Initials computed from name

#### Progress

**Location:** `packages/ui/src/atoms/Progress/`

Visual representation of completion or loading state.

**Props:**
```tsx
interface ProgressProps extends React.HTMLAttributes<HTMLDivElement> {
  value?: number
  max?: number
  size?: 'sm' | 'md' | 'lg'
  showLabel?: boolean
}
```

**Usage:**
```tsx
<Progress
  value={60}
  max={100}
  showLabel
/>

// Indeterminate
<Progress />
```

**Accessibility:**
- `role="progressbar"`
- `aria-valuenow`, `aria-valuemin`, `aria-valuemax`
- Text label announces value to screen readers
- Animated for indeterminate state

#### Separator

**Location:** `packages/ui/src/atoms/Separator/`

Visual divider element with semantic meaning.

**Props:**
```tsx
interface SeparatorProps extends React.HTMLAttributes<HTMLDivElement> {
  orientation?: 'horizontal' | 'vertical'
  decorative?: boolean
}
```

**Usage:**
```tsx
// Decorative separator
<Separator />

// Semantic separator
<Separator decorative={false}>
  <h3>Section Title</h3>
</Separator>
```

**Accessibility:**
- `role="separator"` when not decorative
- `aria-orientation` reflects orientation
- `aria-disabled` when appropriate

### Navigation Atoms

#### SidebarMenuItem

**Location:** `packages/ui/src/atoms/SidebarMenuItem/`

Navigation menu entries with state support.

**Props:**
```tsx
interface SidebarMenuItemProps {
  icon?: React.ReactNode
  label: string
  href?: string
  onClick?: () => void
  isActive?: boolean
  isCollapsed?: boolean
  badge?: React.ReactNode
  children?: React.ReactNode
}
```

**Usage:**
```tsx
<SidebarMenuItem
  icon={<HomeIcon />}
  label="Home"
  href="/"
  isActive={currentPath === '/'}
/>

// With badge
<SidebarMenuItem
  icon={<BellIcon />}
  label="Notifications"
  badge={<Badge variant="danger">3</Badge>}
/>

// Expandable
<SidebarMenuItem
  icon={<FolderIcon />}
  label="Documents"
  isActive={isExpanded}
>
  <SidebarMenuItem label="Reports" href="/reports" />
  <SidebarMenuItem label="Invoices" href="/invoices" />
</SidebarMenuItem>
```

**Accessibility:**
- Proper semantic markup (nav, ul, li)
- `aria-current` when active
- Keyboard navigation between items
- Expandable items use `aria-expanded`

### Feedback Atoms

#### Tooltip

**Location:** `packages/ui/src/atoms/Tooltip/`

Contextual information display on hover or focus.

**Props:**
```tsx
interface TooltipProps {
  content: React.ReactNode
  children: React.ReactNode
  side?: 'top' | 'right' | 'bottom' | 'left'
  delay?: number
}
```

**Usage:**
```tsx
<Tooltip content="This action cannot be undone">
  <Button variant="danger">Delete</Button>
</Tooltip>
```

**Accessibility:**
- `role="tooltip"` on tooltip element
- `aria-describedby` on trigger
- Keyboard accessible via focus
- Touch accessible on mobile

### Layout Atoms

#### AspectRatio

**Location:** `packages/ui/src/atoms/AspectRatio/`

Media container sizing with consistent proportions.

**Props:**
```tsx
interface AspectRatioProps extends React.HTMLAttributes<HTMLDivElement> {
  ratio?: number // width / height
  children: React.ReactNode
}
```

**Common Ratios:**
- `1` - Square (1:1)
- `4/3` - Standard (4:3)
- `16/9` - Widescreen (16:9)
- `9/16` - Portrait (9:16)
- `3/2` - Photo (3:2)

**Usage:**
```tsx
<AspectRatio ratio={16/9}>
  <img src="/hero-image.jpg" alt="Hero" />
</AspectRatio>

<AspectRatio ratio={1}>
  <div>Square content</div>
</AspectRatio>
```

**Accessibility:**
- Maintains aspect ratio for media
- Proper alt text for images
- Prevents layout shift (CLS)

## Common Patterns

### State Management

Atoms support both controlled and uncontrolled patterns:

```tsx
// Controlled
const [value, setValue] = useState('')
<Input value={value} onChange={(e) => setValue(e.target.value)} />

// Uncontrolled
<Input defaultValue="Default value" />
```

### Error Handling

All input atoms support error states:

```tsx
<Input
  label="Email"
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  error={emailError}
  isInvalid={!!emailError}
/>
```

### Icons

Icons are passed as React components:

```tsx
import { MailIcon } from '@kol/ui/icons'

<Input
  label="Email"
  startIcon={<MailIcon />}
/>
```

### Disabled State

All interactive atoms support disabled state:

```tsx
<Button disabled>Cannot click</Button>
<Input disabled value="Disabled" />
<Switch disabled checked />
```

## Token Usage

All atoms use semantic design tokens:

```css
/* Button primary variant */
.kol-button-primary {
  background: var(--kol-accent-primary);
  color: var(--kol-surface-on-primary);
  border: 1px solid var(--kol-accent-primary);
}

/* Input */
.kol-input {
  background: var(--kol-surface-primary);
  border: 1px solid var(--kol-border-default);
  color: var(--kol-surface-on-primary);
}

/* Badge */
.kol-badge-success {
  background: var(--kol-status-success-bg);
  color: var(--kol-status-success-fg);
}
```

## Testing

### Unit Tests

Each atom includes comprehensive tests:

```tsx
// Button.test.tsx
import { render, screen, fireEvent } from '@testing-library/react'
import { Button } from './Button'

describe('Button', () => {
  it('renders with children', () => {
    render(<Button>Click me</Button>)
    expect(screen.getByRole('button')).toHaveTextContent('Click me')
  })

  it('calls onClick when clicked', () => {
    const handleClick = jest.fn()
    render(<Button onClick={handleClick}>Click me</Button>)
    fireEvent.click(screen.getByRole('button'))
    expect(handleClick).toHaveBeenCalledTimes(1)
  })

  it('is disabled when disabled prop is true', () => {
    render(<Button disabled>Click me</Button>)
    expect(screen.getByRole('button')).toBeDisabled()
  })
})
```

### Accessibility Tests

```tsx
// jest-axe integration
import { axe, toHaveNoViolations } from 'jest-axe'

expect.extend(toHaveNoViolations)

it('has no accessibility violations', async () => {
  const { container } = render(<Button>Click me</Button>)
  const results = await axe(container)
  expect(results).toHaveNoViolations()
})
```

### Visual Regression Tests

Storybook stories for each atom:

```tsx
// Button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react'
import { Button } from './Button'

const meta: Meta<typeof Button> = {
  title: 'Atoms/Button',
  component: Button,
  parameters: {
    layout: 'centered',
  },
}

export default meta
type Story = StoryObj<typeof Button>

export const Primary: Story = {
  args: {
    children: 'Primary Button',
    variant: 'primary',
  },
}

export const Secondary: Story = {
  args: {
    children: 'Secondary Button',
    variant: 'secondary',
  },
}

export const Disabled: Story = {
  args: {
    children: 'Disabled Button',
    disabled: true,
  },
}
```

## Best Practices

### Do's

✅ Use semantic HTML elements
✅ Include proper ARIA attributes
✅ Support keyboard navigation
✅ Use design tokens for styling
✅ Provide clear visual feedback
✅ Support both controlled/uncontrolled
✅ Include comprehensive tests
✅ Follow naming conventions
✅ Document props with TypeScript
✅ Provide sensible defaults

### Don'ts

❌ Use divs instead of semantic elements
❌ Forget keyboard accessibility
❌ Hardcode colors or spacing
❌ Break when nested in different contexts
❌ Forget error/disabled states
❌ Mix presentation and logic
❌ Use internal state only
❌ Skip TypeScript definitions
❌ Ignore ARIA best practices
❌ Create atoms that depend on other atoms

## Migration from Legacy

### Button Variants

```diff
- className="btn btn-primary"
+ variant="primary"
```

### Input Patterns

```diff
- <input className="form-input" />
+ <Input />

- <label className="form-label">Email</label>
+ <Input label="Email" />
```

### Badge Variants

```diff
- <span className="badge badge-success">Success</span>
+ <Badge variant="success">Success</Badge>
```

## Related Documentation

**Components:**
- [3.0.0 Design System: Components Overview](3.0.0-design-system-components.md) - Atomic design methodology
- [3.2.0 Design System: Molecules](3.2.0-design-system-molecules.md) - Atom combinations

**Design System:**
- [2.1.0 Design System: Colors](2.1.0-design-system-colors.md) - Color tokens
- [2.2.0 Design System: Typography](2.2.0-design-system-typography.md) - Typography in atoms
- [2.3.0 Design System: CSS Architecture](2.3.0-design-system-css-architecture.md) - Layer structure

**Foundation:**
- [1.0.1 Foundation: Naming Conventions](1.0.1-foundation-naming-conventions.md) - Naming standards
- [7.0.0 Operations: Development Workflow](7.0.0-operations-development-workflow.md) - Component workflow

**Research:**
- [6.2.0 Research: Typography](6.2.0-research-typography.md) - Typography in atoms

---

**File Locations:**
- **Components:** `packages/ui/src/atoms/`
- **Styles:** `packages/ui/css/components.css`
- **Tests:** `packages/ui/src/atoms/*/*.test.tsx`
- **Stories:** `packages/ui/src/atoms/*/*.stories.tsx`

---

**Last Updated:** 2025-11-04
**Cross-References:** 3.0.0, 3.2.0, 2.1.0, 2.2.0, 2.3.0, 1.0.1, 7.0.0
**Category:** Design System
**Status:** Active
