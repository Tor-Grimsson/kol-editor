# 5.1.5 - Chess Dashboards: Grid Layout System Plan

**Status:** Planning
**Date:** 2025-11-07
**Phase:** Dashboard Layout Design & Implementation
**Prerequisite:** 5.1.4 (Chess Components UI Complete)

---

## Overview

Now that we have 20+ polished chess components with real data (27,200 games), we're ready to create stunning dashboard layouts that showcase them properly. This document outlines the approach for building a flexible grid system and multiple curated dashboard views.

> **Note:** The live dashboards ship under the Workshop Analytics chapter (`5.2.0-analytics.md`). This plan remains as the historical design blueprint for the chess-specific layouts that inspired the analytics system.

---

## Current State

### âœ… Completed Components (20+)
- Stat cards (Total Games, Win Rate, Peak ELO, etc.)
- Charts (Time Series, Donut, Histogram, Heatmap, etc.)
- ChessBoard with controls and customization
- Data cards (Top Openings, Top Wins, Rivals, etc.)
- All components use real data from 27,200 games

### ðŸŽ¯ Next Goal
Create dashboard layouts that:
1. Arrange components in visually appealing grids
2. Support multiple layout configurations
3. Are responsive across devices
4. Showcase the data effectively

---

## Proposed Approaches

### **Option 1: CSS Grid - Fixed Grid System** ðŸ“

**Best for:** Precise control, predictable layouts

#### Implementation
```css
.chess-dashboard {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-auto-rows: 200px;
  gap: 16px;
}

.card-1x1 { grid-column: span 1; grid-row: span 1; }
.card-2x1 { grid-column: span 2; grid-row: span 1; }
.card-2x2 { grid-column: span 2; grid-row: span 2; }
.card-1x2 { grid-column: span 1; grid-row: span 2; }
.card-3x2 { grid-column: span 3; grid-row: span 2; }
.card-4x2 { grid-column: span 4; grid-row: span 2; }
```

#### Example Layout
```
Row 1: [Stat] [Stat] [Stat] [Stat]           (4 Ã— 1x1)
Row 2: [Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]            (1 Ã— 4x2)
Row 3: [Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]            (continuation)
Row 4: [Board â”€â”€] [Stats â”€â”€]                 (2 Ã— 2x2)
Row 5: [Board â”€â”€] [Stats â”€â”€]                 (continuation)
Row 6: [Card] [Card] [Chart â”€â”€]              (mixed)
```

#### Pros
- âœ… Precise placement control
- âœ… Responsive with media queries
- âœ… Simple to understand
- âœ… No dependencies
- âœ… Predictable behavior

#### Cons
- âŒ Less flexible for varying content
- âŒ Requires manual breakpoint management
- âŒ Fixed row heights might crop content

---

### **Option 2: Dynamic Grid - Content-Based** ðŸŽ¨

**Best for:** Flexible, organic layouts

#### Implementation
```css
.chess-dashboard {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  grid-auto-rows: minmax(180px, auto);
  gap: 16px;
}

/* Let content define the sizing */
.card {
  min-height: 180px;
}
```

#### Pros
- âœ… Responsive automatically
- âœ… Content-driven sizing
- âœ… More flexible
- âœ… Works on all screen sizes
- âœ… Less code to maintain

#### Cons
- âŒ Less control over exact placement
- âŒ Can look chaotic with mixed content
- âŒ Harder to achieve specific designs

---

### **Option 3: Hybrid - Defined Layouts** ðŸŽ¯

**Best for:** Multiple curated dashboard views

Create 3-4 **named layouts** that users can switch between.

#### Layout A: "Analysis Overview"
**Focus:** High-level performance metrics + visual data

```
Row 1: [Stats] [Stats] [Stats] [Stats]           (4 Ã— 1x1 - 200px)
Row 2: [Time Series Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]          (1 Ã— 4x2 - 400px)
Row 3: [Time Series Chart (cont) â”€â”€â”€â”€â”€â”€]
Row 4: [ChessBoard 2x2] [Notation/Stats 2x2]      (2 Ã— 2x2 - 400px)
Row 5: [ChessBoard 2x2] [Notation/Stats 2x2]      (continuation)
Row 6: [Donut] [Histogram] [Opening Stats]        (3 Ã— 1x1 - 200px)
```

**Components:** ~15-18 cards
**Grid:** 4 columns Ã— 200px rows
**Total Height:** ~1200px

---

#### Layout B: "Performance Deep Dive"
**Focus:** Detailed rating progression and trends

```
Row 1: [Win Rate] [Peak ELO] [Rated Games] [Avg Time]  (4 Ã— 1x1)
Row 2: [Rating Progression Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]            (1 Ã— 4x2)
Row 3: [Rating Progression (cont) â”€â”€â”€â”€â”€â”€â”€â”€â”€]
Row 4: [Heatmap â”€â”€â”€â”€â”€â”€] [Opening Stats â”€â”€]              (2 Ã— 2x2)
Row 5: [Heatmap (cont)] [Opening (cont) â”€â”€]
Row 6: [Rivals] [Top Wins] [Recent Games] [Analysis]    (4 Ã— 1x1)
```

**Components:** ~12-15 cards
**Grid:** 4 columns Ã— 200px rows
**Total Height:** ~1200px

---

#### Layout C: "Live Game View"
**Focus:** Board-centric with analysis tools

```
Row 1-3: [ChessBoard 3x3] [Controls 2x3]          (Board: 600px, Controls: 400px)
Row 4:   [Move History â”€] [Stats] [Evaluation]    (Analysis row)
Row 5:   [Opening Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]             (Context row)
```

**Components:** ~6-8 cards
**Grid:** 2-3 columns Ã— 200px rows
**Total Height:** ~1000px

---

#### Layout D: "Game Statistics Grid"
**Focus:** Data visualization heavy

```
Row 1: [Header Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]           (1 Ã— 4x1)
Row 2: [Donut] [Histogram] [Scatter] [Heatmap]     (4 Ã— 2x2)
Row 3: [Donut] [Histogram] [Scatter] [Heatmap]     (continuation)
Row 4: [Time Series â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]            (1 Ã— 4x2)
Row 5: [Time Series (cont) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]
Row 6: [Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€]            (1 Ã— 4x1)
```

**Components:** ~10-12 cards
**Grid:** 4 columns Ã— 200px rows
**Total Height:** ~1200px

---

### **Recommendation: Option 3 (Hybrid)** ðŸŒŸ

**Why this approach:**
1. Gives users **multiple curated views** for different use cases
2. Maintains **precise control** over component placement
3. Each layout can have **optimal arrangement** for its purpose
4. **Reusable grid system** across all layouts
5. Easy to add more layouts in the future

---

## Technical Implementation Plan

### Phase 1: Grid System Components

#### 1.1 Create `DashboardGrid.jsx`
**Location:** `apps/web/src/components/styleguide/chess/dashboards/DashboardGrid.jsx`

```jsx
const DashboardGrid = ({
  layout = '4-col',
  className = '',
  children
}) => {
  const gridConfigs = {
    '4-col': 'grid-cols-4 auto-rows-[200px]',
    '6-col': 'grid-cols-6 auto-rows-[180px]',
    'board-focus': 'grid-cols-[3fr_2fr] auto-rows-[240px]',
    '3-col': 'grid-cols-3 auto-rows-[200px]'
  }

  const gridClass = gridConfigs[layout] || gridConfigs['4-col']

  return (
    <div className={`grid ${gridClass} gap-4 ${className}`}>
      {children}
    </div>
  )
}

export default DashboardGrid
```

**Responsive Breakpoints:**
```jsx
// Mobile: Stack everything
@media (max-width: 768px) {
  .grid { grid-template-columns: 1fr !important; }
}

// Tablet: 2 columns
@media (min-width: 769px) and (max-width: 1024px) {
  .grid-cols-4 { grid-template-columns: repeat(2, 1fr) !important; }
  .grid-cols-6 { grid-template-columns: repeat(3, 1fr) !important; }
}
```

---

#### 1.2 Create `GridCard.jsx`
**Location:** `apps/web/src/components/styleguide/chess/dashboards/GridCard.jsx`

```jsx
const GridCard = ({
  span = '1x1',
  className = '',
  bgColor = 'bg-surface-primary',
  children
}) => {
  const spanClasses = {
    '1x1': 'col-span-1 row-span-1',
    '2x1': 'col-span-2 row-span-1',
    '1x2': 'col-span-1 row-span-2',
    '2x2': 'col-span-2 row-span-2',
    '3x1': 'col-span-3 row-span-1',
    '3x2': 'col-span-3 row-span-2',
    '4x1': 'col-span-4 row-span-1',
    '4x2': 'col-span-4 row-span-2',
    '6x1': 'col-span-6 row-span-1',
  }

  const responsiveSpan = {
    '1x1': 'md:col-span-1 md:row-span-1',
    '2x1': 'md:col-span-2 md:row-span-1',
    '2x2': 'md:col-span-2 md:row-span-2',
    '4x2': 'md:col-span-4 md:row-span-2',
  }

  return (
    <div
      className={`
        ${spanClasses[span]}
        ${responsiveSpan[span]}
        ${bgColor}
        rounded-lg
        overflow-hidden
        ${className}
      `}
    >
      {children}
    </div>
  )
}

export default GridCard
```

---

### Phase 2: Dashboard Layout Files

#### 2.1 Create `ChessDashboardAnalysis.jsx`
**Location:** `apps/web/src/routes/styleguide/ChessDashboardAnalysis.jsx`

**Purpose:** Overview layout with mix of stats, charts, and board

**Component Count:** ~15-20 components

**Grid:** 4 columns Ã— 200px rows

**Estimated Height:** 1200-1400px

```jsx
import DashboardGrid from '../../components/styleguide/chess/dashboards/DashboardGrid'
import GridCard from '../../components/styleguide/chess/dashboards/GridCard'
// Import all chess components...

const ChessDashboardAnalysis = () => {
  return (
    <DesPage
      heading="Chess Analysis Dashboard"
      label="Overview"
      description="Comprehensive view of your chess performance"
    >
      <DashboardGrid layout="4-col">
        {/* Row 1: Header Stats */}
        <GridCard span="1x1"><TotalGamesCard /></GridCard>
        <GridCard span="1x1"><WinRateCard /></GridCard>
        <GridCard span="1x1"><PeakEloCard /></GridCard>
        <GridCard span="1x1"><RatedGamesCard /></GridCard>

        {/* Row 2-3: Time Series Chart */}
        <GridCard span="4x2"><TimeSeriesChartCard /></GridCard>

        {/* Row 4-5: Board + Stats */}
        <GridCard span="2x2"><ChessBoardCard /></GridCard>
        <GridCard span="1x1"><DonutChartCard /></GridCard>
        <GridCard span="1x1"><CircularGradientCard /></GridCard>

        {/* Row 6: Data Cards */}
        <GridCard span="2x1"><TopOpeningsCard /></GridCard>
        <GridCard span="2x1"><RatingProgressionCard /></GridCard>

        {/* Row 7: More Charts */}
        <GridCard span="1x1"><HistogramCard /></GridCard>
        <GridCard span="2x2"><HeatmapCard /></GridCard>
        <GridCard span="1x1"><TopWinsCard /></GridCard>
      </DashboardGrid>
    </DesPage>
  )
}
```

---

#### 2.2 Create `ChessDashboardPerformance.jsx`
**Location:** `apps/web/src/routes/styleguide/ChessDashboardPerformance.jsx`

**Purpose:** Deep dive into rating and performance trends

**Component Count:** ~12-15 components

**Grid:** 4 columns Ã— 200px rows

```jsx
const ChessDashboardPerformance = () => {
  return (
    <DesPage
      heading="Performance Analysis"
      label="Deep Dive"
      description="Detailed rating progression and performance metrics"
    >
      <DashboardGrid layout="4-col">
        {/* Row 1: Key Metrics */}
        <GridCard span="1x1"><WinRateCard /></GridCard>
        <GridCard span="1x1"><PeakEloCard /></GridCard>
        <GridCard span="1x1"><RatedGamesCard /></GridCard>
        <GridCard span="1x1"><AverageTimeCard /></GridCard>

        {/* Row 2-3: Rating Chart */}
        <GridCard span="4x2"><RatingProgressionChart /></GridCard>

        {/* Row 4-5: Heatmap + Opening Stats */}
        <GridCard span="2x2"><HeatmapCard /></GridCard>
        <GridCard span="2x2"><OpeningStatsCard /></GridCard>

        {/* Row 6: Data Cards */}
        <GridCard span="1x1"><RivalsCard /></GridCard>
        <GridCard span="1x1"><TopWinsCard /></GridCard>
        <GridCard span="1x1"><RecentGamesCard /></GridCard>
        <GridCard span="1x1"><AnalysisCard /></GridCard>
      </DashboardGrid>
    </DesPage>
  )
}
```

---

#### 2.3 Create `ChessDashboardLive.jsx`
**Location:** `apps/web/src/routes/styleguide/ChessDashboardLive.jsx`

**Purpose:** Board-focused view for game replay and analysis

**Component Count:** ~6-8 components

**Grid:** 2-3 columns Ã— variable rows

```jsx
const ChessDashboardLive = () => {
  return (
    <DesPage
      heading="Live Game Analysis"
      label="Game View"
      description="Interactive board with analysis tools"
    >
      <div className="grid grid-cols-[3fr_2fr] gap-4">
        {/* Left: Board (3fr) */}
        <GridCard span="1x3"><ChessBoardCard size="large" /></GridCard>

        {/* Right: Controls & Analysis (2fr) */}
        <div className="flex flex-col gap-4">
          <GridCard span="1x1"><GameInfoCard /></GridCard>
          <GridCard span="1x2"><MoveHistoryCard /></GridCard>
          <GridCard span="1x1"><EvaluationCard /></GridCard>
        </div>
      </div>

      {/* Bottom: Additional Context */}
      <DashboardGrid layout="4-col" className="mt-4">
        <GridCard span="2x1"><OpeningInfoCard /></GridCard>
        <GridCard span="2x1"><StatsCard /></GridCard>
      </DashboardGrid>
    </DesPage>
  )
}
```

---

### Phase 3: Styling & Polish

#### 3.1 Dashboard-Specific CSS
**Location:** `apps/web/src/components/styleguide/chess/dashboards/dashboards.css`

```css
/* Dashboard Grid Styles */
.chess-dashboard-grid {
  container-type: inline-size;
}

/* Card Hover Effects */
.dashboard-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.dashboard-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Responsive Helpers */
@container (max-width: 640px) {
  .dashboard-grid {
    grid-template-columns: 1fr !important;
  }
}

@container (min-width: 641px) and (max-width: 1024px) {
  .dashboard-grid[data-cols="4"] {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}
```

---

#### 3.2 Card Wrapper Enhancements

Add padding and overflow handling:

```jsx
const GridCard = ({ children, ...props }) => {
  return (
    <div {...props}>
      <div className="h-full w-full overflow-auto p-4">
        {children}
      </div>
    </div>
  )
}
```

---

### Phase 4: Navigation & Routing

#### 4.1 Add Dashboard Routes
**Location:** `apps/web/src/routes/Styleguide.jsx`

```jsx
// Add to styleguide routes
{
  path: 'chess-dashboards',
  element: <ChessDashboards />,
  children: [
    { path: 'analysis', element: <ChessDashboardAnalysis /> },
    { path: 'performance', element: <ChessDashboardPerformance /> },
    { path: 'live', element: <ChessDashboardLive /> },
  ]
}
```

---

#### 4.2 Dashboard Navigation Component
**Location:** `apps/web/src/components/styleguide/chess/dashboards/DashboardNav.jsx`

```jsx
const DashboardNav = () => {
  const dashboards = [
    { name: 'Analysis Overview', path: '/styleguide/chess-dashboards/analysis' },
    { name: 'Performance Deep Dive', path: '/styleguide/chess-dashboards/performance' },
    { name: 'Live Game View', path: '/styleguide/chess-dashboards/live' },
  ]

  return (
    <nav className="flex gap-4 mb-6">
      {dashboards.map(dash => (
        <Link
          key={dash.path}
          to={dash.path}
          className="btn-control"
        >
          {dash.name}
        </Link>
      ))}
    </nav>
  )
}
```

---

## Visual Design Considerations

### Color & Contrast
- Use `bg-surface-primary` for cards
- `bg-surface-secondary` for nested elements
- Maintain consistent gaps (16px/4 units)
- Border radius: 8px for cards

### Typography Hierarchy
- Dashboard heading: `kol-heading-xl`
- Section labels: `kol-heading-md`
- Card titles: `kol-heading-sm`
- Stats: `kol-heading-lg` + `kol-body-sm` label

### Spacing System
- Grid gap: 16px (gap-4)
- Card padding: 16px (p-4)
- Section spacing: 24px (gap-6)

### Responsive Breakpoints
- Mobile: < 768px (1 column)
- Tablet: 768px - 1024px (2 columns)
- Desktop: > 1024px (4 columns)

---

## Testing Checklist

### Layout Testing
- [ ] All components render correctly in grid
- [ ] No overflow or clipping issues
- [ ] Cards maintain aspect ratios
- [ ] Responsive breakpoints work
- [ ] Mobile view is usable

### Data Testing
- [ ] All components show real data
- [ ] No console errors
- [ ] Loading states work
- [ ] Empty states handled

### Performance Testing
- [ ] Initial load time < 2s
- [ ] Smooth scrolling
- [ ] No layout thrashing
- [ ] Memory usage acceptable

### Browser Testing
- [ ] Chrome/Edge
- [ ] Firefox
- [ ] Safari
- [ ] Mobile browsers

---

## Questions & Decisions Needed

### **Question 1: Which Approach?**

Which layout approach should we use?

**A)** Build 1 amazing dashboard layout (4-col grid, ~20 components, highly curated)

**B)** Build 2-3 different layouts (Overview, Performance, Live Game views)

**C)** Build the grid system + 1 example, then iterate together

**D)** Go completely wild - experimental masonry layout with fancy animations

**Recommendation:** Option B (2-3 layouts) - gives variety and showcases different use cases

---

### **Question 2: Grid Configuration**

What grid structure should we use?

**A)** 4 columns Ã— 200px rows (more compact, fits more content)

**B)** 6 columns Ã— 180px rows (more flexibility, finer control)

**C)** 3 columns Ã— 240px rows (larger cards, more breathing room)

**D)** Dynamic - let content decide

**Recommendation:** Option A (4 columns) - good balance of flexibility and control

---

### **Question 3: Component Selection**

Which components should we prioritize for the first dashboard?

**Must-Have (~10 components):**
- [ ] Total Games stat card
- [ ] Win Rate stat card
- [ ] Peak ELO stat card
- [ ] Time Series Chart
- [ ] ChessBoard
- [ ] Donut Chart
- [ ] Heatmap
- [ ] Top Openings
- [ ] Rating Progression
- [ ] Histogram

**Nice-to-Have (~5-10 components):**
- [ ] Rivals card
- [ ] Top Wins card
- [ ] Circular Gradient chart
- [ ] Scatter plot
- [ ] Result Pie chart
- [ ] Candlestick chart
- [ ] Featured opening analysis

**Recommendation:** Start with Must-Have set, add Nice-to-Have as space allows

---

### **Question 4: Interaction & Features**

Should dashboards be static or interactive?

**A)** Static - just display data in a beautiful layout

**B)** Basic interactivity - hover states, tooltips

**C)** Advanced interactivity - filtering, sorting, drill-down

**D)** Full interactivity - customizable layouts, drag-and-drop cards

**Recommendation:** Start with B (basic interactivity), add C later if needed

---

### **Question 5: Mobile Strategy**

How should we handle mobile views?

**A)** Stack everything (single column)

**B)** Simplified mobile-specific dashboard

**C)** Horizontal scrolling cards

**D)** Bottom tabs navigation between sections

**Recommendation:** Option A (stack) - simplest and most reliable

---

## Implementation Timeline

### Estimated Time Breakdown

**Phase 1: Grid System (1-2 hours)**
- Create DashboardGrid component (30 min)
- Create GridCard component (30 min)
- Add responsive breakpoints (30 min)
- Test grid system (30 min)

**Phase 2: First Dashboard (2-3 hours)**
- Create ChessDashboardAnalysis.jsx (1 hour)
- Arrange 15-20 components (1 hour)
- Polish spacing and alignment (30 min)
- Test responsive behavior (30 min)

**Phase 3: Additional Dashboards (2-4 hours)**
- Create ChessDashboardPerformance.jsx (1 hour)
- Create ChessDashboardLive.jsx (1 hour)
- Navigation component (30 min)
- Routing setup (30 min)

**Phase 4: Polish & Testing (1-2 hours)**
- CSS refinements (30 min)
- Cross-browser testing (30 min)
- Mobile testing (30 min)
- Documentation (30 min)

**Total Estimated Time:** 6-11 hours

---

## Success Criteria

### Must Achieve
- âœ… At least 1 fully functional dashboard layout
- âœ… Responsive design (mobile/tablet/desktop)
- âœ… All components render with real data
- âœ… Clean, maintainable code
- âœ… No console errors

### Should Achieve
- âœ… 2-3 different dashboard layouts
- âœ… Reusable grid system
- âœ… Smooth hover interactions
- âœ… Good visual hierarchy

### Nice to Have
- âœ… Dashboard navigation/switcher
- âœ… Print-friendly layout
- âœ… Export dashboard as image
- âœ… Customizable layouts

---

## Next Steps

1. **Answer the 5 questions above**
2. **Get approval on approach**
3. **Start implementation:**
   - Phase 1: Grid system
   - Phase 2: First dashboard
   - Phase 3: Additional layouts
   - Phase 4: Polish

4. **Document and test**

---

## References

- Chess Components: `apps/web/src/routes/styleguide/ChessComponents.jsx`
- Chess Data: `packages/chess-data/`
- Design System: `docs/documentation/2.*.md`
- Grid Layout Examples: User provided mockup (4-column layout with mixed card sizes)

---

---

## âœ… Decisions Made

### Question 1: Approach
**Decision:** Option 3 (Hybrid) - Build 2-3 different dashboard layouts

### Question 2: Grid Configuration
**Decision:** 4 columns Ã— 200px rows - Good balance of flexibility and control

### Question 3: Component Selection
**Decision:** Start with core components, adjust and move around as needed

### Question 4: Interaction Level
**Decision:** Full interactivity within reason - meaningful interactions, not unnecessary

### Question 5: Mobile Strategy
**Decision:** Whatever looks best - smooth stacking with transitions

---

**Status:** âœ… Approved - Ready for implementation

**Last Updated:** 2025-11-07
