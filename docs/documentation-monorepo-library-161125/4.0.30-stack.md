---
version: 2.0.0
date: 2025-11-16
status: active
content-type: implementation
category: pages
cross-references:
  parent: 4.0.0
  children:
    - 4.0.31
    - 4.0.32
    - 4.0.33
    - 4.0.34
---

# 4.0.3 Stack Chapter Index

## Overview
Stack is the editorial arm of kolkrabbi.io. This chapter reunites the documentation that was previously scattered under `docs/a-torg/stack-previous-md`, so the web, Studio, and content teams can find everything they need in one place.

- **Primary route:** `/stack`
- **Component:** `apps/web/src/routes/Stack.jsx`
- **Related content:** `/article/:slug` (smart article routing), Sanity `blog` schema, hero/highlight/browse sections.

## Chapter Map

| Doc | Title | Scope |
|-----|-------|-------|
| [4.0.31](4.0.31-stack-prose-styles.md) | Prose Styles & Layouts | Rich prose article layouts, SimpleCodeBlock variants, research vs standard presentation |
| [4.0.32](4.0.32-stack-sanity-settings.md) | Sanity Settings | Environment config, blog schema (incl. `type` field), queries |
| [4.0.33](4.0.33-stack-general-settings.md) | General Settings | Stack route shell, hero/highlight/browse behavior, data flow, image sizing |
| [4.0.34](4.0.34-stack-smart-article-routing.md) | Smart Article Routing | `/article/:slug` layout switcher, implementation details |

Keep each sub-page updated when code changes; this index should always reflect the authoritative children.

## Stack Route Summary

```tsx
<SEO ... />
<main>
  <section className="bg-surface-primary">
    <StackHeroTall />
  </section>

  {latestArticle && <FeaturedArticle />}
  <StackHighlightsGrid />
  <StackBrowseArticles ... />
  <CtaGlobal />
</main>
```

### Data Flow
- `getLatestBlogPosts(20)` → `latestArticle` (hero), next four posts (highlights), remainder (browse grid).
- Tag options derived client-side from the filtered set.
- Search + tag filters run locally; highlights excluded to avoid duplication.

For component-level settings and layout specifics, see [4.0.33](4.0.33-stack-general-settings.md).

## Editorial Layouts
- All Stack articles ultimately render via `/article/:slug`.
- Layout and typography are governed by the Sanity `type` field:
  - `standard` → single-column Portable Text (`kol-prose-wide`)
  - `research` → two-column Rich Prose with sticky nav
- Full details live in [4.0.31](4.0.31-stack-prose-styles.md) and [4.0.34](4.0.34-stack-smart-article-routing.md).

## Todo / Follow-ups
1. Move hero/highlight selection to explicit Sanity flags (see [4.0.32](4.0.32-stack-sanity-settings.md)).
2. Wire pagination into `StackBrowseArticles` once article volume requires it.
3. Add automated tests covering both article layouts and link them back here.

This file now serves as the “Stack home base.” Update the chapter map whenever new Stack docs are added or renamed so everything stays discoverable.
